const card=document.getElementsByClassName("card"),closedCard=document.getElementsByClassName("closed")[0],msg=closedCard.children[1],skip=closedCard.children[2].children[0],ok=closedCard.children[2].children[1],prog=document.getElementsByClassName("progress")[0].children[0],content=document.getElementsByClassName("content"),doneCard=document.getElementsByClassName("done-card")[0],doneBtn=document.getElementsByClassName("done-btn"),notDone=document.querySelector(".done-card .no"),done=document.querySelector(".done-card .yes"),back=document.getElementsByClassName("back")[0];if(localStorage.getItem("progress")){prog.style.width=localStorage.getItem("progress");for(let e=0;e<doneBtn.length;e++)getNum(localStorage.getItem("progress"))/25-1>e&&(doneBtn[e].classList.add("finished"),doneBtn[e].textContent="تم الإنجاز!")}else localStorage.setItem("progress","25%"),prog.style.width=localStorage.getItem("progress");for(let e=0;e<card.length;e++)card[e].style.transition=`transform .5s ${.2*e}s`,card[e].style.transform="translateY(0)";let animation=setInterval(e=>{for(let e=0;e<card.length;e++)card[e].style.transition="opacity 1s 0s, background-color 1s 0s, transform 1s 1s";clearInterval(animation)},0);for(let l=0;l<card.length;l++)card[l].onclick=e=>{if(getNum(localStorage.getItem("progress"))/25-1>=l)for(let e=0;e<card.length;e++)if(card[e]!==card[l])card[e].classList.add("dis");else{card[l].classList.add("active");let t=setInterval(e=>{card[l].parentElement.style.display="none",document.querySelector(".content."+card[l].classList[1]).classList.add("active"),prog.parentElement.style.display="none",back.style.visibility="initial",clearInterval(t)},2e3)}else msg.textContent="ينصح بإنهاء بطاقة "+card[l-1].children[0].children[1].textContent,console.log(getNum(localStorage.getItem("progress"))/25-1),closedCard.style.visibility="initial",closedCard.style.opacity="1",card[l].parentElement.style.filter="blur(5px)",card[l].parentElement.style.pointerEvents="none",prog.parentElement.style.filter="blur(5px)"};ok.onclick=e=>{closedCard.style.visibility="hidden",closedCard.style.opacity="0",card[0].parentElement.style.filter="blur(0px)",card[0].parentElement.style.pointerEvents="initial",prog.parentElement.style.filter="blur(0px)"},skip.onclick=e=>{ok.click();for(let e=0;e<card.length;e++)if(RegExp(card[e].children[0].children[1].textContent).test(msg.textContent)){localStorage.setItem("progress",(e+2)/card.length*100+"%"),prog.style.width=localStorage.getItem("progress"),card[e+1].click();break}},back.onclick=e=>{window.location.reload()};for(let t=0;t<doneBtn.length;t++)doneBtn[t].onclick=e=>{/finished/.test(doneBtn[t].classList)||(doneCard.style.visibility="initial",doneCard.style.opacity="1",content[t].style.pointerEvents="none",content[t].style.filter="blur(5px)",back.style.filter="blur(5px)",back.style.pointerEvents="none")};function getNum(e){return+e.split("").filter(e=>/[0-9]/.test(e)).join("")}notDone.onclick=e=>{doneCard.style.visibility="hidden",doneCard.style.opacity="0",document.querySelector(".content.active").style.filter="blur(0px)",document.querySelector(".content.active").style.pointerEvents="initial",back.style.filter="blur(0px)",back.style.pointerEvents="initial"},done.onclick=e=>{notDone.click(),document.querySelector(".content.active").lastElementChild.classList.add("finished"),document.querySelector(".content.active").lastElementChild.textContent="!تم الإنجاز","100%"!==localStorage.getItem("progress")&&localStorage.setItem("progress",getNum(localStorage.getItem("progress"))+25+"%"),back.click()};